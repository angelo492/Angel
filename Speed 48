--// PRO HUD + SPEED SYSTEM

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local humanoid

-- GUI
local gui = Instance.new("ScreenGui")
gui.Name = "ProHUD"
gui.Parent = player:WaitForChild("PlayerGui")
gui.ResetOnSpawn = false

-- Main Frame
local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0, 430, 0, 270)
main.Position = UDim2.new(0.5, -215, 0.5, -135)
main.BackgroundColor3 = Color3.fromRGB(20,20,30)
main.Active = true

local corner = Instance.new("UICorner", main)
corner.CornerRadius = UDim.new(0,18)

local stroke = Instance.new("UIStroke", main)
stroke.Thickness = 2
stroke.Color = Color3.fromRGB(0,200,255)

local gradient = Instance.new("UIGradient", main)
gradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(35,35,70)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(10,10,20))
}

-- Title
local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1,0,0,40)
title.Text = "⚡ PRO HUD CONTROL"
title.TextColor3 = Color3.fromRGB(255,255,255)
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.BackgroundTransparency = 1

-- Content
local content = Instance.new("Frame", main)
content.Position = UDim2.new(0,10,0,55)
content.Size = UDim2.new(1,-20,1,-65)
content.BackgroundTransparency = 1

-- SPEED BUTTON
local speedBtn = Instance.new("TextButton", content)
speedBtn.Size = UDim2.new(1,0,0,45)
speedBtn.Text = "⚡ SPEED: OFF"
speedBtn.TextColor3 = Color3.fromRGB(255,255,255)
speedBtn.Font = Enum.Font.GothamBold
speedBtn.TextSize = 15
speedBtn.BackgroundColor3 = Color3.fromRGB(255,70,70)

local spCorner = Instance.new("UICorner", speedBtn)
spCorner.CornerRadius = UDim.new(0,12)

-- Slider BG
local sliderBG = Instance.new("Frame", content)
sliderBG.Position = UDim2.new(0,0,0,65)
sliderBG.Size = UDim2.new(1,0,0,14)
sliderBG.BackgroundColor3 = Color3.fromRGB(60,60,90)

local bgCorner = Instance.new("UICorner", sliderBG)
bgCorner.CornerRadius = UDim.new(1,0)

-- Slider Bar
local slider = Instance.new("Frame", sliderBG)
slider.Size = UDim2.new(0.5,0,1,0)
slider.BackgroundColor3 = Color3.fromRGB(0,200,255)

local barCorner = Instance.new("UICorner", slider)
barCorner.CornerRadius = UDim.new(1,0)

-- Speed Value
local speedValue = Instance.new("TextLabel", content)
speedValue.Position = UDim2.new(0,0,0,85)
speedValue.Size = UDim2.new(1,0,0,25)
speedValue.Text = "Velocidad: 24"
speedValue.TextColor3 = Color3.fromRGB(200,200,255)
speedValue.Font = Enum.Font.Gotham
speedValue.TextSize = 14
speedValue.BackgroundTransparency = 1

-- Variables
local enabled = false
local minSpeed = 16
local maxSpeed = 100
local currentSpeed = 24

-- Character Handler
local function setupChar(char)
	humanoid = char:WaitForChild("Humanoid")
end

if player.Character then
	setupChar(player.Character)
end

player.CharacterAdded:Connect(setupChar)

-- Toggle Speed
speedBtn.MouseButton1Click:Connect(function()
	enabled = not enabled
	
	if enabled then
		speedBtn.Text = "⚡ SPEED: ON"
		TweenService:Create(speedBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0,200,120)}):Play()
		if humanoid then
			humanoid.WalkSpeed = currentSpeed
		end
	else
		speedBtn.Text = "⚡ SPEED: OFF"
		TweenService:Create(speedBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(255,70,70)}):Play()
		if humanoid then
			humanoid.WalkSpeed = minSpeed
		end
	end
end)

-- Slider System
local dragging = false

sliderBG.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
	end
end)

sliderBG.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = false
	end
end)

UIS.InputChanged:Connect(function(input)
	if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
		local pos = math.clamp((input.Position.X - sliderBG.AbsolutePosition.X) / sliderBG.AbsoluteSize.X, 0, 1)
		slider.Size = UDim2.new(pos,0,1,0)
		
		currentSpeed = math.floor(minSpeed + (maxSpeed - minSpeed) * pos)
		speedValue.Text = "Velocidad: "..currentSpeed
		
		if enabled and humanoid then
			humanoid.WalkSpeed = currentSpeed
		end
	end
end)

-- Drag System
local drag = false
local start, startPos

main.InputBegan:Connect(function(i)
	if i.UserInputType == Enum.UserInputType.MouseButton1 then
		drag = true
		start = i.Position
		startPos = main.Position
	end
end)

main.InputEnded:Connect(function(i)
	if i.UserInputType == Enum.UserInputType.MouseButton1 then
		drag = false
	end
end)

UIS.InputChanged:Connect(function(i)
	if drag and i.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = i.Position - start
		main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)
