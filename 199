-- SONYC PROJECT V26 - CLEAN & STABLE
local Player = game.Players.LocalPlayer
local RunService = game:GetService("RunService")

local ProjectConfig = {
    SpeedActive = false,
    TargetSpeed = 24,
    EspActive = false
}

-- UI PRINCIPAL
local ScreenGui = Instance.new("ScreenGui", Player.PlayerGui)
ScreenGui.Name = "Sonyc_Clean_V26"
ScreenGui.ResetOnSpawn = false

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 240, 0, 200)
MainFrame.Position = UDim2.new(0.5, -120, 0.5, -100)
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
MainFrame.Active = true
MainFrame.Draggable = true
Instance.new("UICorner", MainFrame)

local MainStroke = Instance.new("UIStroke", MainFrame)
MainStroke.Color = Color3.fromRGB(255, 0, 255)
MainStroke.Thickness = 3

local Container = Instance.new("Frame", MainFrame)
Container.Size = UDim2.new(1, -20, 1, -45)
Container.Position = UDim2.new(0, 10, 0, 40)
Container.BackgroundTransparency = 1

local Layout = Instance.new("UIListLayout", Container)
Layout.Padding = UDim.new(0, 10)
Layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- BOTONES
local function CreateButton(text, configKey)
    local Btn = Instance.new("TextButton", Container)
    Btn.Size = UDim2.new(1, 0, 0, 40)
    Btn.Text = text .. ": OFF"
    Btn.Font = Enum.Font.GothamBold
    Btn.TextColor3 = Color3.new(1, 1, 1)
    Btn.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    Instance.new("UICorner", Btn)

    Btn.MouseButton1Click:Connect(function()
        ProjectConfig[configKey] = not ProjectConfig[configKey]
        Btn.Text = text .. (ProjectConfig[configKey] and ": ON" or ": OFF")
        Btn.BackgroundColor3 = ProjectConfig[configKey] and Color3.fromRGB(150, 0, 150) or Color3.fromRGB(30, 30, 40)
    end)
end

-- Input de Velocidad
local SpeedInput = Instance.new("TextBox", Container)
SpeedInput.Size = UDim2.new(1, 0, 0, 35)
SpeedInput.Text = "24"
SpeedInput.PlaceholderText = "Velocidad..."
SpeedInput.Font = Enum.Font.GothamBold
SpeedInput.TextColor3 = Color3.new(1, 1, 1)
SpeedInput.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
Instance.new("UICorner", SpeedInput)

CreateButton("ACTIVAR SPEED", "SpeedActive")
CreateButton("ACTIVAR ESP", "EspActive")

-----------------------------------------------------------
-- LÓGICA DE FUNCIONAMIENTO
-----------------------------------------------------------

-- Control de Velocidad
SpeedInput.FocusLost:Connect(function()
    ProjectConfig.TargetSpeed = tonumber(SpeedInput.Text) or 24
end)

RunService.RenderStepped:Connect(function()
    local char = Player.Character
    local root = char and char:FindFirstChild("HumanoidRootPart")
    local hum = char and char:FindFirstChild("Humanoid")
    
    if root and hum and ProjectConfig.SpeedActive and hum.MoveDirection.Magnitude > 0 then
        root.Velocity = Vector3.new(hum.MoveDirection.X * ProjectConfig.TargetSpeed, root.Velocity.Y, hum.MoveDirection.Z * ProjectConfig.TargetSpeed)
    end
end)

-- Sistema de ESP (Magenta)
RunService.Heartbeat:Connect(function()
    for _, v in pairs(game.Players:GetPlayers()) do
        if v ~= Player and v.Character then
            local high = v.Character:FindFirstChild("SonycHighlight")
            if ProjectConfig.EspActive then
                if not high then
                    high = Instance.new("Highlight", v.Character)
                    high.Name = "SonycHighlight"
                    high.FillColor = Color3.fromRGB(255, 0, 255)
                    high.OutlineColor = Color3.new(1, 1, 1)
                end
            elseif high then 
                high:Destroy() 
            end
        end
    end
end)

-- Botón de Minimizar
local MinBtn = Instance.new("TextButton", MainFrame)
MinBtn.Size = UDim2.new(0, 25, 0, 25)
MinBtn.Position = UDim2.new(1, -30, 0, 5)
MinBtn.Text = "-"
MinBtn.BackgroundColor3 = Color3.fromRGB(30, 20, 40)
MinBtn.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", MinBtn)

local isMin = false
MinBtn.MouseButton1Click:Connect(function()
    isMin = not isMin
    Container.Visible = not isMin
    MainFrame:TweenSize(isMin and UDim2.new(0, 240, 0, 35) or UDim2.new(0, 240, 0, 200), "Out", "Quart", 0.2, true)
    MinBtn.Text = isMin and "+" or "-"
end)
